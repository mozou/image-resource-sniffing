# 🔍 图片资源嗅探工具

一个功能强大的网页图片资源嗅探工具，专门用于突破反爬虫机制，支持自动嗅探、预览和批量下载。

## ✨ 核心特性

- 🛡️ **强大的反爬虫能力** - 突破403错误，支持arca.live等严格网站
- 🤖 **真实浏览器模拟** - 使用Selenium模拟真实用户行为
- 🔄 **智能懒加载处理** - 自动滚动页面，触发所有图片加载
- 📱 **美观的GUI界面** - 直观易用的图形界面
- 🎯 **按顺序重命名** - 下载的图片按001.jpg, 002.png格式命名
- 👀 **实时预览功能** - 双击列表项即可预览图片
- 📏 **智能大小过滤** - 排除小于指定大小的图片
- 🌐 **多格式支持** - 支持JPG、PNG、GIF、WebP等格式

## 🚀 快速开始

### 1. 安装依赖
```bash
pip install -r requirements.txt
```

### 2. 启动GUI界面
```bash
python selenium_sniffer.py
```

### 3. 使用步骤
1. 在网址框输入要嗅探的URL（如：`https://arca.live/b/umamusume/144007842`）
2. 设置最小图片大小（默认10KB）
3. 选择浏览器模式（推荐静默模式）
4. 点击"开始嗅探"
5. 等待嗅探完成，查看结果列表
6. 双击任意图片进行预览
7. 点击"批量下载"保存所有图片

## 🎯 特别优化

### 针对韩国网站（arca.live）
- ✅ 内置韩语浏览器环境
- ✅ 专门的反爬虫策略
- ✅ 自动处理动态加载内容

### 智能文件命名
- **批量下载**：001.jpg, 002.png, 003.gif...
- **单张下载**：按列表顺序命名
- **重复处理**：自动添加后缀避免覆盖

## 📋 界面功能

| 功能 | 说明 |
|------|------|
| 网址输入 | 输入要嗅探的网页URL |
| 最小大小 | 过滤小于指定KB的图片 |
| 静默模式 | 浏览器后台运行（推荐） |
| 开始嗅探 | 启动图片嗅探过程 |
| 批量下载 | 下载所有找到的图片 |
| 选择目录 | 自定义保存位置 |
| 关闭浏览器 | 手动释放浏览器资源 |
| 双击预览 | 预览选中的图片 |

## 🔧 命令行模式

如果需要在服务器或无GUI环境使用：

```bash
# 基本用法
python selenium_sniffer.py --cli https://example.com

# 指定最小大小
python selenium_sniffer.py --cli https://example.com 50
```

## 📁 文件结构

```
image_resource_sniffing/
├── selenium_sniffer.py    # 主程序（推荐）
├── image_sniffer.py       # 普通版本（备用）
├── web_version.html       # Web版本（便携）
├── requirements.txt       # 依赖包列表
└── README.md             # 说明文档
```

## ⚠️ 使用说明

### 系统要求
- Python 3.7+
- Chrome浏览器
- Windows/macOS/Linux

### 依赖包
- selenium - 浏览器自动化
- webdriver-manager - 自动管理ChromeDriver
- requests - HTTP请求
- Pillow - 图片处理
- tkinter - GUI界面（Python内置）

### 常见问题

**Q: 提示ChromeDriver错误**
```bash
# 解决方案：自动安装管理器会处理
pip install webdriver-manager
```

**Q: 找不到图片**
```bash
# 解决方案：降低最小大小，使用非静默模式观察
# 在GUI中设置最小大小为1KB，取消静默模式
```

**Q: 下载的图片无法打开**
```bash
# 解决方案：已修复文件扩展名问题
# 重新下载即可获得正确格式的图片
```

## 🎉 成功案例

- ✅ arca.live - 韩国社区网站
- ✅ 各类博客和新闻网站
- ✅ 图片展示网站
- ✅ 电商产品页面

## 📞 技术支持

遇到问题请检查：
1. Chrome浏览器是否已安装
2. 网络连接是否正常
3. 目标网站是否可正常访问
4. 控制台错误信息

---

**推荐使用流程**：
1. 启动GUI：`python selenium_sniffer.py`
2. 输入URL并开始嗅探
3. 预览确认图片质量
4. 批量下载获得按顺序命名的图片
5. 完成后关闭浏览器释放资源

现在您拥有了一个功能完整、界面美观的专业图片嗅探工具！🎯